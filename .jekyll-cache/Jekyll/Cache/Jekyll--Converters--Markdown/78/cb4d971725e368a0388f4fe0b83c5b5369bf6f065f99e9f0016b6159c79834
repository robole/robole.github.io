I"¾¬<p>ï¸Dates were so badly realised in Java that a lot people started to use
external libraries such as <a href="http://www.joda.org/joda-time/">Joda Time</a>. ğŸ˜¥â°</p>

<p>It was only in Java 8, that this has been addressed in the <code>java.time</code> package. ğŸ™ Most of the classes are immutable to ensure thread-safety. â˜”</p>

<h1 id="key-temporal-classes">Key temporal classes</h1>

<h2 id="instant-">Instant ğŸ’»âš¡</h2>

<p>An <a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html">Instant</a> is a moment on the timeline in <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">UTC</a>. It is a count in nanoseconds since the first moment of 1970 UTC (unix epoch time). It is essentially a timestamp (often referred to as â€œmachine timeâ€).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Instant</span> <span class="n">a</span> <span class="o">=</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span><span class="o">);</span> <span class="c1">//2018-02-10T17:06:04.194Z</span>
</code></pre></div></div>

<h2 id="zoneid-">ZoneId ğŸŒğŸŒ</h2>
<p>A <a href="https://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html">ZoneId</a> is a time zone.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ZoneId</span> <span class="n">z</span> <span class="o">=</span> <span class="nc">ZoneId</span><span class="o">.</span><span class="na">of</span><span class="o">(</span> <span class="err">â€œ</span><span class="nc">Africa</span><span class="o">/</span><span class="nc">Johannesburg</span><span class="err">â€</span><span class="o">)</span> <span class="o">;</span>
</code></pre></div></div>

<p>A time zone is a set of rules for handling adjustments and anomalies as practiced by a country or region. The most common rule applied is Daylight Saving Time (DST). A time zone has the history of past rules, present rules, and rules confirmed for the near future. ğŸ“</p>

<p>These rules change more often than you might expect. Be sure to keep your date-time libraryâ€™s rules, usually a copy of the â€˜tzâ€™ database, up to date. Keeping up-to-date is easier than ever now in Java 8 with Oracle releasing a <a href="http://www.oracle.com/technetwork/java/javase/tzupdater-readme-136440.html">Timezone Updater Tool</a>.</p>

<p>Use complete time zone names, as much as possible. These names take the form of continent, a SLASH, and a city or region. Avoid the 3-4 letter codes such as â€˜ESTâ€™ or â€˜ISTâ€™. They are neither standardized, nor unique. They further confuse the messiness of DST. â€˜UTCâ€™ is the only one that can be used without issue as it is the <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time#Daylight_saving_time">basis of DST</a>.</p>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/9/9a/Daylightsavings.svg" alt="Daylight saving, turning back time!" height="400px" width="100%" /></p>

<p><a href="https://gist.githubusercontent.com/robole/9b28d3d5edc450f2c95aa94b152c79cb/raw/b796cbb01c15eea6e8983254cff808161736dd0f/ZoneIds">Here</a> is a list of the long version of all the zone IDs. The code prints them all out, if you want to do it yourself!</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">zoneList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="nc">ZoneId</span><span class="o">.</span><span class="na">getAvailableZoneIds</span><span class="o">());</span>
<span class="nc">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">zoneList</span><span class="o">);</span>
<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">zoneList</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++){</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">zoneList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="zoneoffset-">ZoneOffset â•â–ğŸŒ</h2>

<p><a href="https://docs.oracle.com/javase/8/docs/api/java/time/ZoneOffset.html">ZoneOffset</a> is an offset from UTC, such as +02:00.</p>

<p>For example, Paris is one hour ahead of Greenwich/UTC in winter and two hours ahead in summer. The ZoneId instance for Paris will reference two ZoneOffset instances - a +01:00 instance for winter, and a +02:00 instance for summer</p>

<p>Youâ€™re unlikely to use this class directly or itâ€™s related classes: <a href="https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html">OffsetDateTime</a>, and <a href="https://docs.oracle.com/javase/8/docs/api/java/time/OffsetTime.html">OffsetTime</a>.</p>

<h2 id="zoneddatetime-">ZonedDateTime ğŸŒğŸ“…</h2>

<p><a href="https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html">ZonedDateTime</a> is a date-time with a time-zone. Think..</p>

<blockquote>
  <p>ZonedDateTime = Instant + ZoneId</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ZonedDateTime</span> <span class="n">now</span> <span class="o">=</span> <span class="nc">ZonedDateTime</span><span class="o">.</span><span class="na">ofInstant</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">(),</span> <span class="nc">ZoneId</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Europe/Dublin"</span><span class="o">));</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">now</span><span class="o">);</span> <span class="c1">//current time in Dublin</span>
</code></pre></div></div>

<h2 id="local-representations-ï¸">Local representations ğŸ ï¸</h2>

<p>These â€œlocalâ€ date representations are <em>without timezones</em>.</p>
<ul>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html">LocalDate</a> stores a date only (â€˜2010-12-03â€™),</li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html">LocalTime</a> stores a time only (â€˜18:00â€™),</li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html">LocalDateTime</a> stores a date and time (â€˜2010-12-03T11:30â€™).</li>
</ul>

<h2 id="amount-of-time-">Amount of time âŒš</h2>

<p>To specify an amount of time, we can use:</p>
<ul>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a> is time-based (seconds with nanosecond accuracy).</li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Period.html">Period</a> is date-based (years, months, days).</li>
</ul>

<h1 id="which-class-should-i-use-">Which class should I use? ğŸ˜ŸğŸ˜ƒ</h1>

<p>When choosing a temporal-based class, you first identify what aspects of time you need to represent:</p>
<ul>
  <li>Do you need a time zone?</li>
  <li>Date and time?</li>
  <li>Date only? If you need a date, do you need month, day, and year, or a subset?</li>
</ul>

<p>Nearly all of your backend, database, business logic, data persistence, data exchange should be in UTC, you will use <code>Instant</code> the most.</p>

<p>But for presentation to users you need to adjust into a time zone expected by the user. For this, you will probably use <code>ZonedDateTime</code>.</p>

<p>For recording something like a birthday, you might use a <code>LocalDate</code>, because most people observe their birthday on the same day, whether they are in their birth city or somewhere else.</p>

<p>Why would you use OffsetDateTime instead of ZonedDateTime? It would be for special cases. If you are writing complex software that models its own rules for date and time calculations based on geographic locations.</p>

<table>
  <thead>
    <tr>
      <th>Class/Enum</th>
      <th>Year</th>
      <th>Month</th>
      <th>Day</th>
      <th>Hours</th>
      <th>Minutes</th>
      <th>Seconds</th>
      <th>Zone Offset</th>
      <th>Zone ID</th>
      <th>toString()</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Instant</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>X</td>
      <td>Â </td>
      <td>Â </td>
      <td>2013-08-20T15:16:26.355Z</td>
    </tr>
    <tr>
      <td>LocalDate</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>2013-08-20</td>
    </tr>
    <tr>
      <td>LocalDateTime</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>Â </td>
      <td>Â </td>
      <td>2013-08-20T08:16:26.937</td>
    </tr>
    <tr>
      <td>OffsetDateTime</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>Â </td>
      <td>2013-08-20T08:16:26.954-07:00</td>
    </tr>
    <tr>
      <td>ZonedDateTime</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>2013-08-20T08:16:26.937</td>
    </tr>
    <tr>
      <td>LocalTime</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>Â </td>
      <td>Â </td>
      <td>08:16:26.937</td>
    </tr>
    <tr>
      <td>OffsetTime</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>Â </td>
      <td>08:16:26.954-07:00</td>
    </tr>
    <tr>
      <td>MonthDay</td>
      <td>Â </td>
      <td>X</td>
      <td>X</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>â€“08-20</td>
    </tr>
    <tr>
      <td>Year</td>
      <td>X</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>2013</td>
    </tr>
    <tr>
      <td>YearMonth</td>
      <td>X</td>
      <td>X</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>2013-08</td>
    </tr>
    <tr>
      <td>Month</td>
      <td>Â </td>
      <td>X</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>AUGUST</td>
    </tr>
    <tr>
      <td>Duration</td>
      <td>Â </td>
      <td>Â </td>
      <td>^</td>
      <td>^</td>
      <td>^</td>
      <td>X</td>
      <td>Â </td>
      <td>Â </td>
      <td>PT20H (20 hours)</td>
    </tr>
    <tr>
      <td>Period</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>P10D (10 days)</td>
    </tr>
  </tbody>
</table>

<p>^ does not store the value but has methods to access these values</p>

<h1 id="using-dates-">Using Dates ğŸ“…</h1>

<h2 id="creating-a-date-">Creating a date ğŸ£ğŸ“…</h2>

<p>We use these static methods to get an instance. You can get the current date via <code>now()</code>; or a fixed date using <code>of()</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Instant</span> <span class="n">now</span> <span class="o">=</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">now</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span> <span class="c1">//current date</span>

<span class="nc">ZonedDateTime</span> <span class="n">date</span> <span class="o">=</span> <span class="nc">ZonedDateTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2017</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">31</span><span class="o">,</span> <span class="mi">23</span><span class="o">,</span> <span class="mi">59</span><span class="o">,</span> <span class="mi">59</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span>  <span class="nc">ZoneId</span><span class="o">.</span><span class="na">systemDefault</span><span class="o">());</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span> <span class="c1">//2017-11-25</span>
</code></pre></div></div>

<h2 id="comparing-dates-">Comparing dates ğŸ”ğŸ“…</h2>
<p>Use <code>int compareTo(ChronoLocalDate other)</code> to assert the equality of dates by returning a comparsion number, which can be: negative (before); zero (equal); or positive (after).</p>

<p>The self-explanatory <code>boolean isAfter(ChronoLocalDate other)</code>, <code>boolean isBefore(ChronoLocalDate other)</code>, and <code>boolean isBefore(ChronoLocalDate other)</code> could be more convenient if you want a more specific test.</p>

<p>These methods are available in <code>LocalDate</code>, <code>LocalTime</code>, <code>LocalDateTime</code>, and <code>ZonedDateTime</code> (but the datatype of the parameter is <code>ChronoZonedDateTime</code>).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">LocalDate</span> <span class="n">christmas2017</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2017</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">25</span> <span class="o">);</span>
<span class="nc">LocalDate</span> <span class="n">christmas2018</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2018</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">25</span> <span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">christmas2017</span><span class="o">.</span><span class="na">isBefore</span><span class="o">(</span><span class="n">christmas2018</span><span class="o">));</span> <span class="c1">//true</span>
</code></pre></div></div>

<h2 id="difference-between-2-dates-">Difference between 2 dates ğŸ•’..ğŸ••</h2>
<p>Use the time units in <a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoUnit.html">java.time.temporal.ChronoUnit</a> and <code>between(..)</code>.</p>

<p>For example, to get the logical calendar days between 2 dates, you can use <code>DAYS.between(Temporal temporal1Inclusive, Temporal temporal2Exclusive)</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.time.LocalDate</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">time</span><span class="o">.</span><span class="na">temporal</span><span class="o">.</span><span class="na">ChronoUnit</span><span class="o">.</span><span class="na">DAYS</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">time</span><span class="o">.</span><span class="na">temporal</span><span class="o">.</span><span class="na">ChronoUnit</span><span class="o">.</span><span class="na">MONTHS</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">time</span><span class="o">.</span><span class="na">temporal</span><span class="o">.</span><span class="na">ChronoUnit</span><span class="o">.</span><span class="na">YEARS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="nc">LocalDate</span> <span class="n">now</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">now</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span> <span class="c1">//2017-11-26</span>
        <span class="nc">LocalDate</span> <span class="n">christmas</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2017</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">25</span> <span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">christmas</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span> <span class="c1">//2017-11-25</span>
        <span class="nc">LocalDate</span> <span class="n">christmas2018</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2018</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">25</span> <span class="o">);</span>

        <span class="kt">long</span> <span class="n">daysBetween</span> <span class="o">=</span> <span class="no">DAYS</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">now</span><span class="o">,</span> <span class="n">christmas</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Days to christmas: "</span> <span class="o">+</span> <span class="n">daysBetween</span><span class="o">);</span> <span class="c1">//Days to christmas: 29</span>
        <span class="kt">long</span> <span class="n">monthsBetween</span> <span class="o">=</span> <span class="no">MONTHS</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">now</span><span class="o">,</span> <span class="n">christmas2018</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Months to christmas 2018: "</span> <span class="o">+</span> <span class="n">monthsBetween</span><span class="o">);</span> <span class="c1">//Months to christmas 2018: 12</span>
        <span class="kt">long</span> <span class="n">yearsBetween</span> <span class="o">=</span> <span class="no">YEARS</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">now</span><span class="o">,</span> <span class="n">christmas2018</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Years to christmas 2018: "</span> <span class="o">+</span> <span class="n">yearsBetween</span><span class="o">);</span> <span class="c1">//Years to christmas 2018: 1</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="adding-and-subtracting-time-units-from-dates-and-times-">Adding and subtracting time units from dates and times â•â–ğŸ“…</h2>
<p>To add time units, you can:</p>
<ul>
  <li>use the general form: <code> plus(long amountToAdd,TemporalUnit unit)</code>;</li>
  <li>Or specific forms that (predictably) vary for each class:
    <ul>
      <li><code> plusDays(long days)</code></li>
      <li><code>plusSeconds(long seconds]</code></li>
    </ul>
  </li>
</ul>

<p>To subtract time units, you can:</p>
<ul>
  <li>use the general form: <code> minus(long amountToTake,TemporalUnit unit)</code>;</li>
  <li>Or specific forms that (predictably) vary for each class:
    <ul>
      <li><code>minusDays(long days)</code></li>
      <li><code>minusSeconds(long seconds]</code></li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="nc">LocalDate</span> <span class="n">a</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2012</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">minusDays</span><span class="o">(</span><span class="mi">30</span><span class="o">));</span> <span class="c1">//2012-05-31</span>

        <span class="nc">LocalTime</span> <span class="n">b</span> <span class="o">=</span> <span class="nc">LocalTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span><span class="mo">00</span><span class="o">,</span><span class="mo">00</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">plusHours</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span> <span class="c1">//23:00</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Adding a <code>Duration</code> to a <code>ZonedDateTime</code>, time differences are <em>not</em> observed.</p>

<p>Adding a <code>Period</code> to a <code>ZonedDateTime</code>, the time differences are observed.</p>

<h2 id="parsing-dates-ï¸">Parsing dates ğŸ”ğŸ“…ï¸</h2>
<p>Use <code>parse(CharSequence text)</code> for dates in the format of â€œyyyy-mm-ddâ€.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">LocalDate</span> <span class="n">a</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2018-02-01"</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</code></pre></div></div>
<p>To parse a date in another format, use the second version, which requires a <code>DateTimeFormatter</code>, through which you can specify the format: <code>parse(CharSequence text, DateTimeFormatter formatter)</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">DateTimeFormatter</span> <span class="n">formatter</span> <span class="o">=</span> <span class="nc">DateTimeFormatter</span><span class="o">.</span><span class="na">ofPattern</span><span class="o">(</span><span class="s">"dd/MM/yyyy"</span><span class="o">);</span>
<span class="nc">LocalDate</span> <span class="n">a</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"01/02/2018"</span><span class="o">,</span> <span class="n">formatter</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span> <span class="c1">//2018-02-01</span>
</code></pre></div></div>

<h2 id="formatting-dates-ï¸ï¸">Formatting dates ğŸ“…ï¸ğŸ“ï¸</h2>

<p><a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html">DateTimeFormatter</a> provides methods for parsing and printing dates using predefined constants (e.g. ISO_LOCAL_DATE), and <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns">patterns</a> (e.g. yyyy-MMM-dd).</p>

<p>More complex formatting can be done with <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatterBuilder.html">DateTimeFormatterBuilder</a>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.time.LocalDate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Month</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.format.DateTimeFormatter</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleFormatter</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">DateTimeFormatter</span> <span class="n">formatter</span> <span class="o">=</span> <span class="nc">DateTimeFormatter</span><span class="o">.</span><span class="na">ofPattern</span><span class="o">(</span><span class="s">"MMM d yyyy"</span><span class="o">);</span>
        <span class="c1">// use this format to get always two digits for the day</span>
        <span class="nc">DateTimeFormatter</span> <span class="n">f1</span> <span class="o">=</span> <span class="nc">DateTimeFormatter</span><span class="o">.</span><span class="na">ofPattern</span><span class="o">(</span><span class="s">"MMM dd yyyy"</span><span class="o">);</span>
        <span class="nc">LocalDate</span> <span class="n">date</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2015</span><span class="o">,</span> <span class="nc">Month</span><span class="o">.</span><span class="na">JULY</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">formatter</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">f1</span><span class="o">));</span>
        <span class="nc">LocalDate</span> <span class="n">d2</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2015</span><span class="o">,</span> <span class="nc">Month</span><span class="o">.</span><span class="na">JULY</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d2</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">formatter</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<h2 id="get-a-particular-day-ï¸">Get a particular day ğŸ£ğŸ“…ï¸</h2>

<p>The <a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjuster.html">TemporalAdjusters</a> class contains a standard set of adjusters, which are available as static methods. These include:</p>

<ul>
  <li>finding the first or last day of the month</li>
  <li>finding the first day of next month</li>
  <li>finding the first or last day of the year</li>
  <li>finding the first day of next year</li>
  <li>finding the first or last day-of-week within a month, such as â€œfirst Wednesday in Juneâ€</li>
  <li>finding the next or previous day-of-week, such as â€œnext Thursdayâ€</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">LocalDate</span> <span class="n">date</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2000</span><span class="o">,</span> <span class="nc">Month</span><span class="o">.</span><span class="na">OCTOBER</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"first day of Month: %s%n"</span><span class="o">,</span> <span class="n">date</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="nc">TemporalAdjusters</span><span class="o">.</span><span class="na">firstDayOfMonth</span><span class="o">()));</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"first Monday of Month: %s%n"</span><span class="o">,</span> <span class="n">date</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="nc">TemporalAdjusters</span><span class="o">.</span><span class="na">firstInMonth</span><span class="o">(</span><span class="nc">DayOfWeek</span><span class="o">.</span><span class="na">MONDAY</span><span class="o">)));</span>
</code></pre></div></div>

<h1 id="java-7-and-below-ï¸">Java 7 and below ğŸ“…ï¸ğŸ‘´ğŸ‘µ</h1>

<p>In short, donâ€™t waste your time doing it this way! But you may need to maintain code that uses these classes.</p>

<p>Some of the issues are:</p>
<ul>
  <li>Some of the classes have poor API design. For example, years in <code>java.util.Date</code> start at 1900, months start at 1, and days start at 0. This is not very intuitive!</li>
  <li>Classes such as <code>java.util.Date</code> and
 <code>SimpleDateFormatter</code> arenâ€™t thread-safe, leading to potential concurrency issues for users, not something you would expect to deal with when writing date-handling code.</li>
</ul>

<p>But for completeness, lets show a little of the way it was done.</p>

<p>The <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Date.html">Date</a> class
is the raw form of a date, it is the number of milliseconds
since January 1, 1970. Most of itâ€™s methods are deprecated, we are encouraged to
use <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html">Calendar</a> <a href="https://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html">GregorianCalendar</a> for creating a specific date.</p>

<p>You can create a Date using <code>java.util.Date</code> in 2 forms:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Date</span> <span class="n">now</span> <span class="o">=</span> <span class="nc">Date</span><span class="o">();</span> <span class="c1">//this moment</span>
<span class="nc">Date</span> <span class="n">someDate</span> <span class="o">=</span> <span class="nc">Date</span><span class="o">(</span><span class="mi">1511563121308</span><span class="o">);</span> <span class="c1">//ms since 1970 = 24.11.2017 23:39</span>
</code></pre></div></div>
<p>You would probably not use the second version, and you may want a date other
than now! So..</p>

<p>Really, Date is used as the type to transfer a date between Calendar
and <a href="https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html">SimpleDateFormat</a>:</p>
<ul>
  <li>Calendar is an abstract class for creating and manipulating a specific date. There is a static method for creating an instance:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Calendar</span> <span class="n">rightNow</span> <span class="o">=</span> <span class="nc">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
</code></pre></div>    </div>
  </li>
  <li>GregorianCalendar is a concrete class for creating and manipulating a specific date, in the Gregorian standard that is followed by most countries in the world.</li>
  <li>SimpleDateFormat is to format and parse a dates e.g. dd.mm.yyyy for German dates.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Calendar</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.GregorianCalendar</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="nc">GregorianCalendar</span> <span class="n">now</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GregorianCalendar</span><span class="o">();</span>
        <span class="nc">SimpleDateFormat</span> <span class="n">formatter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyy-MMM-dd"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Today is: "</span> <span class="o">+</span> <span class="n">formatter</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">now</span><span class="o">.</span><span class="na">getTime</span><span class="o">()));</span>

        <span class="nc">GregorianCalendar</span> <span class="n">christmas</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GregorianCalendar</span><span class="o">(</span><span class="mi">2017</span><span class="o">,</span><span class="nc">Calendar</span><span class="o">.</span><span class="na">DECEMBER</span><span class="o">,</span> <span class="mi">25</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Christmas day is:"</span> <span class="o">+</span> <span class="n">formatter</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">christmas</span><span class="o">.</span><span class="na">getTime</span><span class="o">()));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<h1 id="example-application-ï¸">Example application ğŸ“…ï¸ğŸ’¾</h1>

<p>ğŸ“š <a href="https://github.com/robole/library-redi">Library - overdue books</a></p>

<p>For a loan of a book, we want to store when the book is loaned, and when it is returned. It is a better fit to use an <code>Instant</code> for these fields, and stick with UTC timezone implicitly. The user can decide how to record the value (timezone), and display it to the user.</p>

<p>To see if the book was returned late, in <code>getDaysLate()</code>, we want to use the beginning of the loan date (midnight) as the basis of the calculation, to include the full day. The easiest way (I could find) to do this, is to convert the <code>Instant</code> to a <code>ZonedDateTime</code> using the â€œUTCâ€ <code>ZoneId</code>, and use <code>truncatedTo()</code> to only take the date portion, therefore resetting the time portion to 00:00:00. ğŸ˜…</p>

<p>This is a good example of how to use temporal classes for storing dates, and making calculations based on them.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Loan</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Book</span> <span class="n">book</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Instant</span> <span class="n">loanDate</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Instant</span> <span class="n">returnDate</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">NUM_OF_DAYS_PER_LOAN</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Loan</span><span class="o">(</span><span class="nc">Book</span> <span class="n">book</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">book</span> <span class="o">=</span> <span class="n">book</span><span class="o">;</span>
        <span class="n">book</span><span class="o">.</span><span class="na">setLoan</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="n">loanDate</span> <span class="o">=</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">//getters and setters</span>

    <span class="kd">public</span> <span class="nc">Instant</span> <span class="nf">getDueDate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">loanDate</span><span class="o">.</span><span class="na">plus</span><span class="o">(</span><span class="no">NUM_OF_DAYS_PER_LOAN</span><span class="o">,</span> <span class="nc">ChronoUnit</span><span class="o">.</span><span class="na">DAYS</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getDaysLate</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">days</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">returnDate</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">ZoneId</span> <span class="n">utc</span> <span class="o">=</span> <span class="nc">ZoneId</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"UTC"</span><span class="o">);</span>
            <span class="c1">//resets time to midnight</span>
            <span class="nc">ZonedDateTime</span> <span class="n">startOfLoanDate</span> <span class="o">=</span> <span class="nc">ZonedDateTime</span><span class="o">.</span><span class="na">ofInstant</span><span class="o">(</span><span class="n">loanDate</span><span class="o">,</span> <span class="n">utc</span><span class="o">).</span><span class="na">truncatedTo</span><span class="o">(</span><span class="nc">ChronoUnit</span><span class="o">.</span><span class="na">DAYS</span><span class="o">);</span>
            <span class="kt">int</span> <span class="n">daysOnLoan</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="no">DAYS</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">startOfLoanDate</span><span class="o">.</span><span class="na">toInstant</span><span class="o">(),</span> <span class="n">returnDate</span><span class="o">);</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">daysOnLoan</span> <span class="o">&gt;</span> <span class="no">NUM_OF_DAYS_PER_LOAN</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">days</span> <span class="o">=</span> <span class="n">daysOnLoan</span> <span class="o">-</span> <span class="no">NUM_OF_DAYS_PER_LOAN</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">days</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="additional-reading">Additional Reading</h1>
<ul>
  <li><a href="https://docs.oracle.com/javase/tutorial/datetime/iso/index.html">Oracle Tutorial: Date-Time API</a></li>
</ul>
:ET